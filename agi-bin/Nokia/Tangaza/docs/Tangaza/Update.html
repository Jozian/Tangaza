<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Nokia::Tangaza::Update - Module for making updates</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#can_post">can_post</a></li>
		<li><a href="#init">init</a></li>
		<li><a href="#update_main_menu">update_main_menu</a></li>
		<li><a href="#notify_dest">notify_dest</a></li>
		<li><a href="#save_pub_message">save_pub_message</a></li>
		<li><a href="#save_sub_message">save_sub_message</a></li>
	</ul>

	<li><a href="#authors">AUTHORS</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Nokia::Tangaza::Update - Module for making updates</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This module enables the use to send Tangazo to everyone on the 
selected group/vikundi.</p>
<p>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<p>
</p>
<h2><a name="can_post">can_post</a></h2>
<p>Checks whether the user is allowed to send messages to the selected group/vikundi
Users can only post to groups they are members of.</p>
<p>Returns: 1 if the user is allowed, 0 otherwise</p>
<dl>
<dt><strong><a name="args39" class="item">Args:</a></strong></dt>

<dd>
<p>$group_id: The group id you are attempting to post to</p>
</dd>
</dl>
<p>
</p>
<h2><a name="init">init</a></h2>
<p>Sets up global variables used througout the model i.e. file paths where
recordings will be saved and preferences defined in settings.conf</p>
<p>
</p>
<h2><a name="update_main_menu">update_main_menu</a></h2>
<p>Plays the update menu, asking users to select what update actions 
they'd like to perform.</p>
<p>If the slot selected has no defined group, the selected group 
has no members or user has no permissions to post to the group,
the method plays back an error message to that effect and returns.</p>
<p>The recorded update will be saved in the path defined in settings.conf</p>
<p>
</p>
<h2><a name="notify_dest">notify_dest</a></h2>
<p>Flashes all members in the group/vikundi to inform them that a new 
message has been sent to the group.</p>
<dl>
<dt><strong><a name="args40" class="item">Args:</a></strong></dt>

<dd>
<p>$friends: The list of friends to be notified</p>
<p>$channels: The group the message was sent to</p>
</dd>
</dl>
<p>
</p>
<h2><a name="save_pub_message">save_pub_message</a></h2>
<p>A message sent by a member is called a `pub_message`. This method
saves new updates to the database.</p>
<dl>
<dt><strong><a name="args41" class="item">Args:</a></strong></dt>

<dd>
<p>$update_file: path to the recorded message</p>
<p>$channels: the group/vikundi that the message was sent to</p>
</dd>
</dl>
<p>
</p>
<h2><a name="save_sub_message">save_sub_message</a></h2>
<p>Each pub message is mapped to a user in the group - this is called sub_message.
This method attaches a message to a specific user within the group</p>
<dl>
<dt><strong><a name="args42" class="item">Args:</a></strong></dt>

<dd>
<p>$pub_id: the pub_message this refers to</p>
<p>$dst_user_id: the group member to receive this message</p>
<p>$channel: the group/vikundi this message belongs to</p>
<p>$dst_user_ids: a buffer array with ids of all users who this message was sent to</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="authors">AUTHORS</a></h1>
<p>Billy Odero, Jonathan Ledlie</p>
<p>Copyright (C) 2010 Nokia Corporation.</p>

</body>

</html>
